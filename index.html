<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>

  <title>petewarden/iPhoneTracker @ GitHub</title>

  <link rel="stylesheet" type="text/css" href="http://static.openheatmap.com/css/mainstyle.css"/>

  <style type="text/css">
    body {
      margin-top: 1.0em;
      font-size: 125%;
    }
    #container {
      margin: 0 auto;
      width: 700px;
    }
    h1 { font-size: 3.8em; margin-bottom: 3px; }
    h1 .small { font-size: 0.4em; }
    h1 a { text-decoration: none }
    h2 { font-size: 1.5em; }
    h3 { font-size: 1.2em; text-align: left; }
    a { }
    .description { margin-bottom: 30px; margin-top: 30px; }
    .download { float: right; }
    pre { background: #000; color: #fff; padding: 15px;}
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .footer { text-align:center; padding-top:30px; font-style: italic; }
  </style>
</head>

<body>
  <a href="http://github.com/petewarden/iPhoneTracker"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>

  <div id="container">

    <div class="download">
      <a href="http://github.com/petewarden/iPhoneTracker/zipball/master">
        <img border="0" width="90" src="http://github.com/images/modules/download/zip.png"></a>
      <a href="http://github.com/petewarden/iPhoneTracker/tarball/master">
        <img border="0" width="90" src="http://github.com/images/modules/download/tar.png"></a>
    </div>

    <h1><a href="http://github.com/petewarden/iPhoneTracker">iPhone Tracker</a></h1>

    <div class="description">
    This open-source application maps the information that your iPhone is recording about your movements. It doesn't record anything itself, it only displays files that are already hidden on your computer.
    <br>
    <br>
    <a href="http://static.openheatmap.com.s3.amazonaws.com/iPhoneTracker.app.zip"><u>Download the application</u></a>
    <br>
    <br>
    <a href="http://github.com/petewarden/iPhoneTracker"><u>View the source code</u></a>.
    <br>
    <br>
    <img src="southofengland.png"/>
    </div>

    <h2>Authors</h2>
<p>Alasdair Allan (alasdair@babilim.co.uk)
<br/>Pete Warden (pete@petewarden.com)
<br/>
<br/>      </p>

    <h2>Download Source</h2>
    <p>
      You can download this project in either
      <a href="http://github.com/petewarden/iPhoneTracker/zipball/master">zip</a> or
      <a href="http://github.com/petewarden/iPhoneTracker/tarball/master">tar</a> formats.
    </p>
    <p>You can also clone the project with <a href="http://git-scm.com">Git</a>
      by running:
      <pre>$ git clone git://github.com/petewarden/iPhoneTracker</pre>
    </p>

    <h2>FAQ</h2>
     
    <br>
    <h3>How does the application work?</h3> 
 
    <p>If you run it on an OS X machine that you’ve been syncing with an iPhone or an iPad with cellular plan, it will scan through the backup files that are automatically made, looking for the hidden file containing your location. If it finds this file, it will then display the location history on the map.</p> 
  
    <h3>How can I examine the data without running the application?</h3>
    
    <p>It will be stored in a folder inside /Users/<your user name>/Library/Application Support/MobileSync/Backups/. Each time you sync up an iOS device (iPad, iPhone, etc) files will be copied into a new folder here. The names of the folders and the files within them are mostly random strings, but there are some index files like Info.plist and Manifest.mbdb. Find the folder that has the most recent backup by looking at the modified dates of the files. Then, load Info.plist into a text editor to see what device it's for. You should see a 'Device Name' value in the XML, make sure that it matches your iPhone.</p>

    <p>The Manifest.mbdb and Manifest.mbdx files contain a listing of the real names of the files represented by random strings in that folder. Luckily, Alasdair found a Python script here that can convert those:</p>
    <p><a href="http://stackoverflow.com/questions/3085153/how-to-parse-the-manifest-mbdb-file-in-an-ios-4-0-itunes-backup">http://stackoverflow.com/questions/3085153/how-to-parse-the-manifest-mbdb-file-in-an-ios-4-0-itunes-backup</a></p>
    
    <p>If you cd into the folder in the terminal, and run iphonels.py you'll see a listing of all the files with their real names. Now, pipe it through grep to find the file we want, eg:</p>
    
    <pre>~/Downloads/iphonels.py | grep "consolidated"</pre>

    <p>You should see something like this:</p>
    
    <p>-rw-r--r-- 00000000 00000000 28082176 1297319654 1297319654 1282888290 (4096c9ec676f2847dc283405900e284a7c815836)RootDomain::Library/Caches/locationd/consolidated.db</p>

    <p>That text in brackets just before 'RootDomain::' is the name of the actual file on disk that holds the location data. Since it's an SQLite database file, you can use any standard SQLite browser, I'm using this Firefox plugin: <a href="https://addons.mozilla.org/en-US/firefox/addon/sqlite-manager/">https://addons.mozilla.org/en-US/firefox/addon/sqlite-manager/</a></p>

    <p>Open up the file, choose the 'CellLocation' table, and you can browse the tens of thousands of points that it has collected, I've attached a screenshot. The most interesting data is the latitude, longitude location and the timestamp. The timestamp shows the time in seconds since January 1st 2001.</p>
     
    <h3>Does this application share the information with anyone?</h3> 
 
    <p>No. All the data stays on your machine. The code behind it has been open-sourced so you can inspect the code and compile it yourself if you’re a developer.</p> 
 
    <h3>What can I do to remove this data?</h3> 
 
    <p>This database of your locations is stored on your iPhone as well as in any of the automatic backups that are made when you sync it with iTunes. One thing that will help is choosing encrypted backups, since that will prevent other users or programs on your machine from viewing the data, but there will still be a copy on your device.</p> 
 
    <h3>Why is Apple collecting this information?</h3> 
 
    <p>It’s unclear. One guess might be that they have new features in mind that require a history of your location, but that’s pure speculation. The fact that it's transferred across devices when you restore or migrate is evidence the data-gathering isn't accidental.</p> 
 
    <h3>Is Apple storing this information elsewhere?</h3> 
 
    <p>There’s no evidence that it’s being transmitted beyond your device and any machines you sync it with.</p> 
 
    <h3>What’s so bad about this?</h3> 
 
    <p>The most immediate problem is that this data is stored in an easily-readable form on your machine. Any other program you run or user with access to your machine can look through it.</p> 

    <p>The more fundamental problem is that Apple are collecting this information at all. Cell-phone providers collect similar data almost inevitably as part of their operations, but it’s kept behind their firewall. It normally requires a court order to gain access to it, whereas this is available to anyone who can get their hands on your phone or computer.</p> 

    <p>By passively logging your location without your permission, Apple have made it possible for anyone from a jealous spouse to a private investigator to get a detailed picture of your movements.</p> 
 
    <h3>Why did you open-source this code, won’t that make the problem worse?</h3> 
 
    <p>We did hesitate over the right thing to do in this case, but when it became clear that "Individuals familiar with iPhone forensic analysis will be quite familiar" with it, <a href="http://ryanneal.wordpress.com/2011/03/18/war-against-the-iphones-consolidated-db/">as Ryan Neal puts it</a> and that at least one other person <a href="http://www.courbis.fr/spip.php?page=article&amp;id_article=255">had tried to alert the public</a> but apparently failed to make it clear what was going on, a demonstration application seemed the lesser evil.</p> 

    <p>To make it less useful for snoops, the spatial and temporal accuracy of the data has been artificially reduced. You can only animate week-by-week even though the data is timed to the second, and if you zoom in you’ll see the points are constrained to a grid, so your exact location is not revealed. The underlying database has no such constraints, unfortunately.</p> 
 
    <h3>Why are some points in places I’ve never visited?</h3> 
 
    <p>As far as we can tell, the location is determined by triangulating against the nearest cell-phone towers. This isn’t as accurate as GPS, but presumably takes less power. In some cases it can get very confused and temporarily think you’re several miles from your actual location, but these tend to be intermittent glitches.</p> 
 
    <h3>How was it discovered?</h3> 
 
    <p>We’ve been collaborating on several location data visualization projects, for example this map of radiation levels in Japan:
<a href="http://www.guardian.co.uk/science/blog/2011/mar/24/fukushima-radiation-levels">http://www.guardian.co.uk/science/blog/2011/mar/24/fukushima-radiation-levels</a></p> 
    <p>We’d been discussing doing a visualization of mobile data, and while he was researching into what was available, Alasdair discovered this file. At first we weren’t sure how much data was there, but after we dug further and visualized the extracted data, it became clear that there was a scary amount of detail on our movements. It also became obvious that at least some other people knew about it, but it wasn't being publicized.</p> 
 
    <h3>What’s your relationship with Apple?</h3> 
 
    <p>Pete worked for Apple for five years, and left three years ago on good terms. He had no contact with anything iPhone related, (he worked on desktop visualization software) and received no help or information from inside the company while researching this problem. We’re both big fans of Apple’s products, and take no pleasure in uncovering this issue.</p> 

  </div>

  
</body>
</html>
